{% extends "base.html" %}
{% load humanize %}
{% block contents %}
<div class="row mt-5">
    <div class="col-12">
        <div class="card" style="width: 100%;">
            <div class="card-body">
                <h5 class="card-title">{{ tal_detail.name }}</h5>
                <div>â¤ï¸ {{tal_detail.like}}</div>
                <div>{{page_path}}</div>
            </div>
            
            <li class="list-group-item">
                <!-- ì¦ê²¨ì°¾ê¸°ìš© ë¶€ë¶„ -->
                <form action="/favorite/create" method="POST">
                    {% csrf_token %}                    
                    {% for field in form %}
                    <div class="form-group">
                        <input type="{{ field.field.widget.input_type }}" class="form-control" 
                        id="{{ field.id_for_label }}"  placeholder="{{ field.label }}" name="{{ field.name }}" 
                        value="{% if field.name == 'like' %}{{ '1' }}{% else %}{{tal_detail.id}}{% endif %}"/> 
                    </div>                       
                        {% if field.errors %}
                        <span style="color: red">{{ field.errors }}</span>
                        {% endif %}
                    
                    {% endfor %}                    
                    {% if search.like == 1 %}
                    <button type="submit" class="btn btn-warning">ğŸ’”</button>
                    {% else %}
                    <button type="submit" class="btn btn-primary">â¤ï¸</button>
                    {% endif %}
                </form>
                <!-- ì¦ê²¨ì°¾ê¸°ìš© ë¶€ë¶„ -->
            </li>
            
            <ul class="list-group list-group-flush">
                <li class="list-group-item">ì œì¡°ì‚¬: {{ tal_detail.company }}</li>
                <li class="list-group-item">ì›ì¬ë£Œ: {{ tal_detail.mtrl }}</li>
                <li class="list-group-item">ìš©ëŸ‰/ë„ìˆ˜: {{ tal_detail.std }}</li>
                <li class="list-group-item">ìƒì„¸ì„¤ëª…: {{ tal_detail.dsc }}</li>        
                <li class="list-group-item"><img src="{{tal_detail.img}}" alt=""></li>        
                
            </ul>
            {{ graph_html | safe }}

        </div>
    </div>
</div>
<hr/>
<div class="row mt-5">
    <div class="col-12">
        <div class="comment">
        <h5>&#35; ëŒ“ê¸€</h5><br/>
        {% for comment, graph_comments in comments_and_graphs %}         
            
            <p class="comment-name">{{comment.name}} : {{comment.body}} </p>
            <p class="comment-score-group">ìƒ‰ : {{comment.color}} </p>
            <p class="comment-score-group">í–¥ : {{comment.flavor}} </p>
            <p class="comment-score-group">ë‹¹ë„ : {{comment.sweet}} </p>
            <p class="comment-score-group">ì‚°ë„ : {{comment.sour}} </p>
            <p class="comment-score-group">íƒ„ì‚°ê° : {{comment.carbon}} </p>
            <p class="comment-score-group">ì¢…í•©í‰ê°€ : {{comment.total}} </p>
            {{ graph_comments | safe }}
            {% if email == comment.name.email %}
            <button type="button" class="btn btn-danger" onclick="location.href='/comment/delete/{{comment.id}}/'">ì‚­ì œí•˜ê¸°</button>
            <button type="button" class="btn btn-success" onclick="location.href='/comment/update/{{comment.id}}/'">ìˆ˜ì •í•˜ê¸°</button>            
            {% endif %}
            

            <hr/>
        {% empty %}
            <p>ì•„ì§ ë“±ë¡ëœ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endfor %}
            


        </div>        
    </div>
</div>
<hr/>
<div class="row mt-5">
    <div class="col-12">
        <h3>Add a Comment</h3>
        <form method="POST">
            {% csrf_token %}
            {{comment_form.as_p}}
            <!-- models.py ë°ì´í„°ë² ì´ìŠ¤(comment)ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ, forms.pyë¥¼ ê±°ì³ nameê³¼ bodyí•„ë“œë¥¼ píƒœê·¸ë¡œ ê°ì‹¸ì„œ ì¶œë ¥  -->
            <button type="submit" class="btn btn-primary">ëŒ“ê¸€ì‘ì„±</button>
        </form>
    </div>
</div>
{% endblock %}