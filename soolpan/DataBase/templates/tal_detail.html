{% extends "base.html" %}
{% load humanize %}
{% block contents %}
<div class="row mt-5">
    <div class="col-12">
        <div class="card" style="width: 100%;">
            <div class="card-body">
                <h5 class="card-title">{{ tal_detail.name }}</h5>
            </div>
            <li class="list-group-item">
                <form action="/favorite/create" method="POST">
                    {% csrf_token %}
                    {% for field in form %}
                    <div class="form-group">
                        {% if field.name != 'post' %}
                        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                        {% endif %}
                        <input type="{{ field.field.widget.input_type }}" class="form-control" 
                        id="{{ field.id_for_label }}"  placeholder="{{ field.label }}" name="{{ field.name }}" 
                        value="{% if field.name == 'post' %}{{ post.id }}{% endif %}"/> 
                        <!-- product 값 자동 입력 -->
                    </div>   

                        {% if field.errors %}
                        <span style="color: red">{{ field.errors }}</span>
                        {% endif %}
                    
                    {% endfor %}
                    
                    <button type="submit" class="btn btn-primary"> 즐겨찾기 </button>
                </form>
            </li>
            
            <ul class="list-group list-group-flush">
                <li class="list-group-item">제조사: {{ tal_detail.company }}</li>
                <li class="list-group-item">원재료: {{ tal_detail.mtrl }}</li>
                <li class="list-group-item">용량/도수: {{ tal_detail.std }}</li>
                <li class="list-group-item">상세설명: {{ tal_detail.dsc }}</li>        
                <li class="list-group-item"><img src="{{tal_detail.img}}" alt=""></li>        
            </ul>
        </div>
    </div>

    <div class="row">
        <div class="col-12 ">
            <a href="/">Go home</a>
        </div>
    </div>
</div>
<hr/>
<div class="row mt-5">
    <div class="col-12">
        <div class="comment">
        <h5>&#35; 댓글</h5><br/>
        {% for comment in comments%}            
            <p class="comment-name">{{comment.name}} : {{comment.body}} </p>
            <p class="comment-score-group">색 : {{comment.color}} </p>
            <p class="comment-score-group">향 : {{comment.flavor}} </p>
            <p class="comment-score-group">당도 : {{comment.sweet}} </p>
            <p class="comment-score-group">산도 : {{comment.sour}} </p>
            <p class="comment-score-group">탄산감 : {{comment.carbon}} </p>
            <p class="comment-score-group">종합평가 : {{comment.total}} </p>
            <button type="button" class="btn btn-danger" onclick="location.href='/comment/delete/{{comment.id}}/'">삭제하기</button>
        {% empty %}
            <p>아직 등록된 댓글이 없습니다.</p>
        {% endfor %}
        </div>        
    </div>
</div>
<hr/>
<div class="row mt-5">
    <div class="col-12">
        <h3>Add a Comment</h3>
        <form method="POST">
            {% csrf_token %}
            {{comment_form.as_p}}
            <!-- models.py 데이터베이스(comment)의 인스턴스 변수로, forms.py를 거쳐 name과 body필드를 p태그로 감싸서 출력  -->
            <button type="submit" class="btn btn-primary">댓글작성</button>
        </form>
    </div>
    <div class="col-12 mt-2">
        <button type="submit" class="btn btn-primary" onclick="location.href='/'">돌아가기</button>
    </div>
</div>
{% endblock %}